name: Stoat Proxy Ultimate Notifier
on:
  push:
  pull_request:
    types: [opened, closed]
  watch:
    types: [started]
  fork:
  issues:
    types: [opened]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Build and Send Notification
        run: |
          EVENT="${{ github.event_name }}"
          USER="${{ github.actor }}"
          REPO="${{ github.repository }}"
          URL="https://github.com/$REPO"

          if [ "$EVENT" == "watch" ]; then
            MSG="â­ **Yeni Star!**\nğŸ‘¤ **KullanÄ±cÄ±:** $USER\nâœ¨ Proxy reposu parlÄ±yor!"
          elif [ "$EVENT" == "fork" ]; then
            MSG="ğŸ´ **Repo ForklandÄ±!**\nğŸ‘¤ **KullanÄ±cÄ±:** $USER\nğŸ“¦ Proxy'nin bir kopyasÄ± alÄ±ndÄ±."
          elif [ "$EVENT" == "push" ]; then
            MSG="ğŸš€ **Yeni Push!**\nğŸ‘¤ **Yapan:** $USER\nğŸ“ **Mesaj:** ${{ github.event.head_commit.message }}\nğŸ”— [Commit'i GÃ¶r]($URL/commit/${{ github.sha }})"
          elif [ "$EVENT" == "pull_request" ]; then
            MSG="ğŸ”€ **Pull Request:** ${{ github.event.pull_request.title }}\nğŸ‘¤ **Durum:** ${{ github.event.action }}\nğŸ”— [PR Detay](${{ github.event.pull_request.html_url }})"
          elif [ "$EVENT" == "issues" ]; then
            MSG="ğŸ“¢ **Yeni Issue AÃ§Ä±ldÄ±!**\nğŸ‘¤ **AÃ§an:** $USER\nğŸ“Œ **BaÅŸlÄ±k:** ${{ github.event.issue.title }}\nğŸ”— [Ä°ncele](${{ github.event.issue.html_url }})"
          else
            MSG="ğŸ”” **GitHub EtkinliÄŸi:** $EVENT\nğŸ‘¤ **Yapan:** $USER\nğŸ“ **Repo:** $REPO"
          fi

          # Proxy KanalÄ± Webhook Linkin:
          curl -X POST https://stoat.chat/api/webhooks/01KGQ0D3T3FW9EDDFD21EQZVHP/jnEjItkmdDBM_XynlZsJxQbZ-Y9Wd0Hyt3e-8KH-TQoariGhWPgYrw-_GAfY4uZH/ \
          -H "Content-Type: application/json" \
          -d "{\"content\": \"$MSG\"}"
